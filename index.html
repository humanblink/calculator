<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- Auteur: HUMANBLINK Innovation v.3.2 -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculateur d'arrosage - Region GenÃ¨ve</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f8f7;
      margin: 0;
      padding: 0;
      color: #333;
    }
    h1, h2 {
      text-align: center;
    }
    .container {
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }
    .section {
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      padding: 20px;
    }
    .section h3 {
      margin-top: 0;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    .toggle-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .toggle-buttons label {
      background-color: #e0f7fa;
      padding: 10px;
      border-radius: 20px;
      cursor: pointer;
      border: 1px solid #00796b;
    }
    .toggle-buttons input[type="checkbox"] {
      display: none;
    }
    .toggle-buttons input[type="checkbox"]:checked + label {
      background-color: #4db6ac;
      color: white;
    }
    .note {
      font-size: 0.9em;
      color: #666;
      margin-top: 5px;
    }
    a {
      color: #ffffff;
      
    }
    
    .section a {
  color: #00695c;
}

    .btn-calculate {
      display: block;
      margin: 0 auto 20px auto;
      padding: 12px 24px;
      background-color: #00796b;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
    }
    
    .section p {
  line-height: 1.6;
  margin-bottom: 12px;
}

.section ul {
  padding-left: 20px;
  margin-top: 0;
  margin-bottom: 16px;
}

.section li {
  margin-bottom: 6px;
}

  
    
    
  </style>
</head>
<body>
<div class="container">
  <h1>Calculateur d'arrosage - Region GenÃ¨ve</h1>

  <div class="section">
    <h3>ðŸŒ± Infos du jardin</h3>
    <label>Surface du jardin (mÂ²):
      <input type="number" id="area" min="10" max="2000">
    </label>
    <label>Type de plante:
      <select id="plantType">
        <option>Gazon</option>
        <option>Jardin mixte</option>
        <option>LÃ©gumes</option>
        <option>Plantes ornementales</option>
      </select>
    </label>
    <label>Exposition au soleil:
      <select id="sun">
        <option>Ensoleillement total</option>
        <option>Mi-ombre</option>
        <option>Ombre majoritaire</option>
      </select>
    </label>
    <label>Type de sol:
      <select id="soilType">
        <option>Argileux</option>
        <option>Limoneux</option>
        <option>Sableux</option>
        <option>Tourbeux</option>
      </select>
    </label>
  </div>

  <div class="section">
    <h3>ðŸ’§ MÃ©thode d'irrigation</h3>
    <label>MÃ©thode:
      <select id="irrigationType">
        <option>Arrosage manuel</option>
        <option>Goutte-Ã -goutte</option>
        <option>Sprinkler</option>
      </select>
      <div class="note">
        ðŸ’¡ Cette mÃ©thode inclut une majoration estimÃ©e liÃ©e au sur-arrosage : Manuel +40%, Sprinkler +35%, Goutte-Ã -goutte +17.5%.
      </div>
    </label>
    <label>EfficacitÃ© (%):
      <select id="efficiency">
        <option>60</option>
        <option>75</option>
        <option>90</option>
      </select>
    </label>
  </div>

  <div class="section">
    <h3>ðŸ—“ Temps et saison</h3>
    <label>Mois sÃ©lectionnÃ©s :</label>
    <div class="toggle-buttons">
      <input type="checkbox" id="jan" name="month"><label for="jan">Janvier</label>
      <input type="checkbox" id="feb" name="month"><label for="feb">FÃ©vrier</label>
      <input type="checkbox" id="mar" name="month"><label for="mar">Mars</label>
      <input type="checkbox" id="apr" name="month"><label for="apr">Avril</label>
      <input type="checkbox" id="may" name="month"><label for="may">Mai</label>
      <input type="checkbox" id="jun" name="month"><label for="jun">Juin</label>
      <input type="checkbox" id="jul" name="month"><label for="jul">Juillet</label>
      <input type="checkbox" id="aug" name="month"><label for="aug">AoÃ»t</label>
      <input type="checkbox" id="sep" name="month"><label for="sep">Septembre</label>
      <input type="checkbox" id="oct" name="month"><label for="oct">Octobre</label>
      <input type="checkbox" id="nov" name="month"><label for="nov">Novembre</label>
      <input type="checkbox" id="dec" name="month"><label for="dec">DÃ©cembre</label>
    </div>
    <label>FrÃ©quence d'arrosage:
      <select id="frequency">
        <option>1 fois par semaine</option>
        <option>Chaque jour</option>
        <option>Chaque 2 jours</option>
        <option>Chaque 3 jours</option>
      </select>
    </label>
    <label>Ajuster pour arrosage avec capteurs de sols:
      <input type="checkbox" id="sensorAdjustment">
      <div class="note">ðŸ’¡ Ce rÃ©glage ajuste les besoins en eau en tenant compte dâ€™un arrosage optimisÃ© grÃ¢ce Ã  des capteurs dâ€™humiditÃ© du sol. <BR>Cela permet de rÃ©duire la consommation dâ€™eau en Ã©vitant le sur-arrosage (rÃ©duction de 35%).</div>
    </label>
  </div>

  <button class="btn-calculate">Calculer</button>

<div class="section" id="results">
  <h3>ðŸ“Š RÃ©sultats</h3>
  <p>ðŸ‘‰ (Les rÃ©sultats apparaÃ®tront ici aprÃ¨s l'intÃ©gration des calculs...)</p>
</div>


  <div class="section">
  <h3>ðŸ“Š Notes</h3>
  <p><strong>Glossaire :</strong></p>
  <ul>
    <li><strong>ETâ‚€ FAO :</strong> Ã‰vapotranspiration de rÃ©fÃ©rence</li>
    <li><strong>Kc :</strong> Coefficient cultural</li>
    <li><strong>Besoin brut en eau :</strong> ET Ã— Kc Ã— Surface Ã— Jours Ã· 1000 Ã· efficacitÃ©</li>
    <li><strong>Pluie effective :</strong> 85% des prÃ©cipitations historiques moyennes</li>
    <li><strong>Besoin net :</strong> Besoin brut - pluie effective (0 si nÃ©gatif)</li>
  </ul>

  <p><strong>Sources :</strong></p>
  <ul>
    <li><a href="https://prevision-meteo.ch/climat/journalier/geneve-cointrin/2024-01" target="_blank">MeteoSwiss - GenÃ¨ve Cointrin</a></li>
    <li><a href="https://weatherspark.com/y/47923/MÃ©tÃ©o-moyenne-Ã -GenÃ¨ve-Suisse-tout-au-long-de-lâ€™annÃ©e" target="_blank">WeatherSpark - DonnÃ©es climatiques GenÃ¨ve</a></li>
  </ul>

  <p><em>Outil en phase test, sans garantie. Utilisation Ã  vos risques.<br>
  HUMANBLINK Innovation - v.3.1</em></p>
</div>
</div>


</div>
    
</footer>

<script> 
// Geneva Garden Irrigation Calculator Script
// Author: HUMANBLINK Innovation
// Version: 2.9.4 (with total irrigation summary)

const ET0 = {
  Janvier: 0.5, FÃ©vrier: 0.75, Mars: 1.41, Avril: 2.37,
  Mai: 3.31, Juin: 4.27, Juillet: 4.75, AoÃ»t: 4.29,
  Septembre: 2.85, Octobre: 1.9, Novembre: 0.95, DÃ©cembre: 0.5
};

const averageMonthlyRain = {
  Janvier: 60, FÃ©vrier: 55, Mars: 65, Avril: 70,
  Mai: 80, Juin: 90, Juillet: 75, AoÃ»t: 70,
  Septembre: 65, Octobre: 80, Novembre: 75, DÃ©cembre: 65
};

const kcValues = {
  "Gazon": 0.95,
  "Plantes ornementales": 0.90,
  "Jardin mixte": 0.85,
  "LÃ©gumes": 0.90
};

const irrigationEfficiency = {
  "Goutte-Ã -goutte": 0.90,
  "Sprinkler": 0.75,
  "Arrosage manuel": 0.60
};

const soilLossFactor = {
  "Argileux": 0.85,
  "Limoneux": 1.00,
  "Sableux": 1.20,
  "Tourbeux": 1.10
};

const frequencyToEvents = {
  "Chaque jour": 30,
  "Chaque 2 jours": 15,
  "Chaque 3 jours": 10,
  "1 fois par semaine": 4
};

const monthDays = {
  Janvier: 31, FÃ©vrier: 28, Mars: 31, Avril: 30,
  Mai: 31, Juin: 30, Juillet: 31, AoÃ»t: 31,
  Septembre: 30, Octobre: 31, Novembre: 30, DÃ©cembre: 31
};

function getSelectedMonths() {
  const checkboxes = document.querySelectorAll('input[name="month"]:checked');
  return Array.from(checkboxes).map(cb => cb.labels[0].innerText);
}

function formatM3(val) {
  return val.toFixed(2) + ' mÂ³';
}

function calculateIrrigation() {
  const area = parseFloat(document.getElementById('area').value);
  const plantType = document.getElementById('plantType').value;
  const soilType = document.getElementById('soilType').value;
  const irrigationType = document.getElementById('irrigationType').value;
  const frequency = document.getElementById('frequency').value;
  const months = getSelectedMonths();

  if (isNaN(area) || months.length === 0) {
    alert("Veuillez entrer une surface valide et sÃ©lectionner au moins un mois.");
    return;
  }

  const Kc = kcValues[plantType];
  const efficiency = irrigationEfficiency[irrigationType];
  const soilFactor = soilLossFactor[soilType];
  const eventsPerMonth = frequencyToEvents[frequency];

  let resultHTML = '<table border="1" cellpadding="8" style="width:100%;border-collapse:collapse;text-align:center">';
  resultHTML += '<tr><th>Mois</th><th>Pluie (mÂ³)</th><th>ETâ‚€ (mÂ³)</th><th>Pertes Pluie (mÂ³)</th><th>Besoins Irrigation (mÂ³)</th><th>FrÃ©quence</th><th>Eau / arrosage (mÂ³)</th></tr>';

  let totalNeed = 0;

  months.forEach(month => {
    const days = monthDays[month];
    const et0 = ET0[month];
    const rain = averageMonthlyRain[month];

    const grossNeed = (et0 * Kc * area * days) / 1000 / efficiency;
    const effectiveRain = 0.85 * rain * area / 1000;
    const rainLoss = effectiveRain * 0.15;
    let adjustedNetNeed = Math.max(0, (grossNeed - (effectiveRain - rainLoss)) * soilFactor);
    if (document.getElementById('sensorAdjustment').checked) {
      adjustedNetNeed *= 0.65;
    }

    totalNeed += adjustedNetNeed;
    const perEvent = adjustedNetNeed / eventsPerMonth;

    resultHTML += `<tr>
      <td>${month}</td>
      <td>${formatM3(effectiveRain)}</td>
      <td>${formatM3(grossNeed)}</td>
      <td>${formatM3(rainLoss)}</td>
      <td>${formatM3(adjustedNetNeed)}</td>
      <td>${frequency}</td>
      <td>${formatM3(perEvent)}</td>
    </tr>`;
  });

  resultHTML += '</table>';

  const totalLine = `<p style="font-weight:bold;color:#2a7f62;font-size:1.2em;margin-top:12px;">
  ðŸ’§ Besoin total d'irrigation: ${formatM3(totalNeed)}</p>`;

  document.getElementById('results').innerHTML = '<h3>ðŸ“Š RÃ©sultats</h3>' + resultHTML + totalLine;

}

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById('irrigationType').addEventListener('change', () => {
    const type = document.getElementById('irrigationType').value;
    const defaultEff = Math.round(irrigationEfficiency[type] * 100);
    document.getElementById('efficiency').value = defaultEff.toString();
  });
  document.querySelector('.btn-calculate').addEventListener('click', calculateIrrigation);
});
</script>
</body>
</html>
